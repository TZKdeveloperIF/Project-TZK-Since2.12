# 代码框架
## 发送和接收
RTS命令可选择AI队伍、工人、基地守备队、其他玩家；此外，为统一交互和代码，玩家自己队伍单位的命令也走类似的交互调度。如此一来，相同的命令可以被上述任意类型单位执行。  
玩家自己的单位是本地的；由客户端直接创建的服务器，AI单位也是本地的。因此*本地与否不适合在代码设计上区别对待*。  
RTS交互虽然面向玩家，但定位上它应当是最先进的指挥方式，也应当允许AICO使用。因此*发送端不应当预设存在玩家*。  
综上所述，发送端应当做的事情就很明确了：
+ 根据命令对已选择单位做一步初筛（也可以延后到命令接收时做）
+ 将已选择单位和参数通过RTS系统发送（即使执行命令的单位对发送方来说是本地的，也不做区分）

接收端则根据自身性质决定如何处理这些单位：
+ 服务器：将隶属于AI队伍、工人、基地守备队的单位挑选出来，执行操作
+ 玩家：将隶属于本队的单位挑选出来，执行操作
    + 如果在命令中要跳过玩家（譬如disband），则应当在具体命令里结合参数实现
    + **实际上，需要保持一致性的只有交互。**玩家队伍命令由玩家发送，那么发给玩家的RTS命令应当做的事情是**假扮玩家发送命令**。  
      因此，只要玩家队伍命令和 AI-RTS 命令具有一致性，那么通过RTS将命令和参数发给玩家后，玩家自行基于参数重发命令即可
        + todo：完善某些批处理、预处理

TODO：进一步地，可能会允许RTS交互选择空载具。这些载具同样统一发送，接收端各自处理local的单位  
TODO：join等命令可能会产生一些奇异的单位。譬如A将单位join到B，在A看来单位在B队，在B看来单位却不在B队，这种情况下，即使各客户端及服务器都处理自己的单位，这个奇异单位也不会得到处理。
# 设计问题
## 发送方的信息
+ 设计时认为RTS命令只可能由cmd发送
    + 如果想要把所有命令统一到RTS框架，就必须在发送命令的位置携带发送者信息，否则无法区分来自cmd的和来自玩家自己的命令
## 接收方
+ 设计时认为只有服务器AI单位会接收
    + 发送给worker、基地守备队、tg、空载具的场景，如何设计？
    + 发送给其他玩家的场景，如何设计？