# 工程化
每个桥梁都是一个项目 (project), 注册到服务器上，然后服务器生成索引并广播
## ID
每个队伍维护一个单调递增的编号, 基于编号和队伍序号可生成互相不冲突的ID
## 项目信息
+ 起点和终点
    + 理论上, 这两个坐标就足够包含桥梁的全部信息了, 因为桥梁将按照这两个坐标和确定的逻辑唯一生成
+ 段落标量信息
    + 每一段桥都有它的位置、三维矢量信息
+ 段落物体信息
    + 物体创建后，将记录到项目中（由server生成，不存在并发写问题）
+ 有效性
    + 被拆除的工程，项目信息置空，或者设置有效位
+ 拆除方式
    + 直接删除桥梁不合理? 但造桥一方往桥里埋炸药很合理. 直接把连接处和桥梁炸断，让桥梁坍塌
    + 界面上和Destruction区别开来
+ 起爆方式
    + 允许保留桥梁，但是主动引爆其中的一部分。这种场景，和敌人主动打断，是一个性质
+ 维修方式
    + 现有维修机制耦合度较高，暂时不重构。桥梁设置损毁后10秒将消失。被打断会自行消失
+ 桥梁图标
    + 玩家自行遍历桥梁项目，生成图标，对于有效的项目，如果段落物体损毁或不存在，就用警示性的图标填充，否则用普通的图标
        + 对于完整的段落, 可以用一个rectangle表示, 不必每段占用一个图标，但是OFP里这件事情不好管理
    + 桥梁工程编号图标 (大概需要绑定一个背景图标)
        + 考虑到rectangle不显示text, 是不是自定义一个rectangle图标比较好
            + 这需要新模组的支持
+ 建造提示图标
    + 如何提示本阵营所有玩家? 还是说只提示工程的发起者?
    + 如果无效段落图标也展示，那么没必要给建造提示吧
+ 建造检测
    + 死板地从头到尾检测没必要. 而且也要考虑部分拆除/损毁的处置方式
+ 血量设置
    + 桥梁很难打断. 一个合理的damage初始值, 或者合理的armor值, 会比较合适
    + armor需要在新模组里做. damage初值可以测试并赋值
## 过桥方式
+ AI队伍过桥交互
    + "过桥"应当是一个**RTS命令**, 因为它需要持续一段时间
    + 选择单位后, 点击桥头, 执行过桥命令. 展开二级面板, 显示所点击的坐标附近一定范围内可用的桥梁工程
        + 需要检测桥梁是否完好
+ 玩家单位过桥交互
    + 同理, 是一个持续性的命令
    + 选择单位后点击桥头. 不需要像原先那样画线了, 太麻烦
+ 造桥
    + 工程车, MHQ, 无论AI单位还是玩家队伍单位, 执行过桥命令的时候应当能完成这件事情
    + 不需要分段做. 它们自己移动, 造桥
+ 过桥的表现
    + 类似attach那样. 通过磁悬浮的方式过去吧. 定期重置z坐标. 桥只是一个
## 桥的模型
+ 加宽
+ 删掉路灯杆